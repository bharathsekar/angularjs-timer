!function(){"use strict";function timer($interval){return{restrict:"E",link:function(scope,element,attrs){function setHtml(){element.html(getHumanizedDuration())}function startTimer(){interval=$interval(function(){duration=Number(duration)+Number(1e3),setHtml(),scope.$broadcast("timer-updated",duration)},1e3)}function stopTimer(){$interval.cancel(interval),scope.$broadcast("timer-stopped",duration),setHtml(),interval=void 0}function resetTimer(){$interval.cancel(interval),duration=0,setHtml(),scope.$broadcast("timer-reset"),interval=void 0}function destroyTimer(){$interval.cancel(interval),duration=0,scope.$broadcast("timer-destroyed"),interval=void 0}function getHumanizedDuration(){var inSeconds=duration/1e3,displayTime=displayPattern,hours=0,minutes=0;if(displayTime.indexOf("hh")>=0&&(hours=Math.floor(inSeconds/3600).toFixed(0),displayTime=hours<10?displayTime.replace(/hh/g,"0"+String(hours)):displayTime.replace(/hh/g,String(hours))),displayTime.indexOf("mm")>=0&&(minutes=Math.floor((inSeconds-3600*hours)/60).toFixed(0),displayTime=minutes<10?displayTime.replace(/mm/g,"0"+String(minutes)):displayTime.replace(/mm/g,String(minutes))),displayTime.indexOf("ss")>=0){var seconds=inSeconds-3600*hours-(60*minutes).toFixed(0);displayTime=seconds<10?displayTime.replace(/ss/g,"0"+String(seconds)):displayTime.replace(/ss/g,String(seconds))}return displayTime}var interval,duration=0;attrs.initDuration&&(duration=attrs.initDuration);var displayPattern="hh:mm:ss";attrs.displayPattern&&(displayPattern=attrs.displayPattern),setHtml(),element.on("$destroy",function(){destroyTimer()}),scope.$on("start-timer",function(event){startTimer()}),scope.$on("stop-timer",function(event){stopTimer()}),scope.$on("reset-timer",function(event){resetTimer()})}}}angular.module("angularjs-timer",[]).directive("timer",["$interval",timer])}();